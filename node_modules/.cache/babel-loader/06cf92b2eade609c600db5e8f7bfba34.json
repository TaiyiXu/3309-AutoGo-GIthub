{"ast":null,"code":"import _slicedToArray from\"/Users/zhangcao/Desktop/OWL/ 3309 - Database /assignment4/3309-AutoGo-GIthub/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'bootstrap/dist/css/bootstrap.css';import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import Axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){//React hooks\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"Not authorized\"),_useState6=_slicedToArray(_useState5,2),authKey=_useState6[0],setAuthKey=_useState6[1];//what's this for?\nvar API_DOMAIN=process.env.API_DOMAIN||'localhost';//For navigate between pages\nvar navigate=useNavigate();//Login function\nvar staffLogin=function staffLogin(){if(currentUser!==\"\"&&password!==''){// Using Axios to send post request to our backend\nAxios.post(\"http://\".concat(API_DOMAIN,\":8081/api/staff_login\"),{loginType:'staff',usr:currentUser,pwd:password}).then(function(response){setAuthKey(response.data);if(currentUser!==\"\"&&response.data!==\"\"){localStorage.setItem(\"currentUser\",currentUser);localStorage.setItem(\"password\",password);navigate('/staff-home');window.location.reload();}else{alert(authKey);}});}};var guestLogin=function guestLogin(){if(currentUser!==\"\"&&password!==''){// Using Axios to send post request to our backend\nAxios.post(\"http://\".concat(API_DOMAIN,\":8081/api/guest_login\"),{loginType:'guest',usr:currentUser,pwd:password}).then(function(response){setAuthKey(response.data);console.log(response.data);if(currentUser!==\"\"&&response.data!==''){localStorage.setItem(\"currentUser\",currentUser);localStorage.setItem(\"password\",password);localStorage.setItem('clientNo',response.data.clientNo);//testing\n// navigate('/guest-home')\nwindow.location.reload();}else{alert(authKey);}});}};return/*#__PURE__*/_jsxs(\"div\",{class:\"row align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col\",children:/*#__PURE__*/_jsxs(\"form\",{class:\"form-horizontal\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){setCurrentUser(event.target.value);},name:\"inputUserName\",type:\"text\",class:\"form-control\",id:\"inputUserNameStaff\",placeholder:\"User name\",required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"inputUserName\",class:\"form-label\",children:\"User Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){setPassword(event.target.value);},name:\"inputPassword\",type:\"password\",class:\"form-control\",id:\"inputPasswordStaff\",placeholder:\"Password\",required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"inputPassword\",class:\"form-label\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"position-relative\",children:/*#__PURE__*/_jsx(\"div\",{class:\"position-absolute top-0 end-0\",children:/*#__PURE__*/_jsx(\"button\",{onClick:staffLogin,id:\"staff-login-btn\",class:\"btn btn-dark\",type:\"button\",children:\"Log In As Staff\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"col\",children:/*#__PURE__*/_jsxs(\"form\",{class:\"form-horizontal\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){setCurrentUser(event.target.value);},name:\"inputUserName\",type:\"text\",class:\"form-control\",id:\"inputUserNameGuest\",placeholder:\"User name\",required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"inputUserName\",class:\"form-label\",children:\"User Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){setPassword(event.target.value);},name:\"inputPassword\",type:\"password\",class:\"form-control\",id:\"inputPasswordGuest\",placeholder:\"Password\",required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"inputPassword\",class:\"form-label\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"position-relative\",children:/*#__PURE__*/_jsx(\"div\",{class:\"position-absolute top-0 end-0\",children:/*#__PURE__*/_jsx(\"button\",{onClick:guestLogin,id:\"guest-login-btn\",class:\"btn btn-dark\",type:\"button\",children:\"Log In As Guest\"})})})]})})]});}","map":{"version":3,"sources":["/Users/zhangcao/Desktop/OWL/ 3309 - Database /assignment4/3309-AutoGo-GIthub/src/components/login.js"],"names":["React","useState","useNavigate","Axios","Login","currentUser","setCurrentUser","password","setPassword","authKey","setAuthKey","API_DOMAIN","process","env","navigate","staffLogin","post","loginType","usr","pwd","then","response","data","localStorage","setItem","window","location","reload","alert","guestLogin","console","log","clientNo","event","target","value"],"mappings":"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","sourcesContent":["import 'bootstrap/dist/css/bootstrap.css';\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Axios from 'axios';\n\nexport default function Login() {\n    //React hooks\n    const [currentUser, setCurrentUser] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [authKey, setAuthKey] = useState(\"Not authorized\");//what's this for?\n    const API_DOMAIN = process.env.API_DOMAIN || 'localhost';\n\n    //For navigate between pages\n    let navigate = useNavigate();\n\n    //Login function\n    const staffLogin = () => {\n        if (currentUser !== \"\" && password !== '') {\n            // Using Axios to send post request to our backend\n            Axios.post(`http://${API_DOMAIN}:8081/api/staff_login`, {\n                loginType: 'staff',\n                usr: currentUser,\n                pwd: password\n            }).then(response => {\n                setAuthKey(response.data)\n                if (currentUser !== \"\" && response.data !== \"\") {\n                    localStorage.setItem(\"currentUser\", currentUser)\n                    localStorage.setItem(\"password\", password)\n                    navigate('/staff-home')\n                    window.location.reload();\n                } else {\n                    alert(authKey);\n                }\n            })\n        }\n    }\n\n    const guestLogin = () => {\n\n        if (currentUser !== \"\" && password !== '') {\n            // Using Axios to send post request to our backend\n            Axios.post(`http://${API_DOMAIN}:8081/api/guest_login`, {\n                loginType: 'guest',\n                usr: currentUser,\n                pwd: password\n            }).then(response => {\n                setAuthKey(response.data)\n                console.log(response.data)\n                if (currentUser !== \"\" && response.data !== '') {\n                    localStorage.setItem(\"currentUser\", currentUser)\n                    localStorage.setItem(\"password\", password)\n                    localStorage.setItem('clientNo', response.data.clientNo)\n                    //testing\n                    // navigate('/guest-home')\n                    window.location.reload();\n                } else {\n                    alert(authKey);\n                }\n            })\n        }\n    }\n\n    return (\n\n        <div class=\"row align-items-center\">\n\n            <div class=\"col\">\n                <form class=\"form-horizontal\" >\n                    <div class=\"form-floating mb-3\">\n                        <input onChange={(event) => { setCurrentUser(event.target.value) }} name=\"inputUserName\" type=\"text\" class=\"form-control\" id=\"inputUserNameStaff\"\n                            placeholder=\"User name\" required />\n                        <label for=\"inputUserName\" class=\"form-label\">User Name</label>\n                    </div>\n                    <div class=\"form-floating mb-3\">\n                        <input onChange={(event) => { setPassword(event.target.value) }} name=\"inputPassword\" type=\"password\" class=\"form-control\" id=\"inputPasswordStaff\"\n                            placeholder=\"Password\" required />\n                        <label for=\"inputPassword\" class=\"form-label\">Password</label>\n                    </div>\n                    <div class=\"position-relative\">\n                        <div class=\"position-absolute top-0 end-0\">\n                            <button onClick={staffLogin} id='staff-login-btn' class=\"btn btn-dark\" type=\"button\">Log In As Staff</button>\n                        </div>\n                    </div>\n                </form>\n            </div>\n\n            <div class=\"col\">\n                <form class=\"form-horizontal\" >\n                    <div class=\"form-floating mb-3\">\n                        <input onChange={(event) => { setCurrentUser(event.target.value) }} name=\"inputUserName\" type=\"text\" class=\"form-control\" id=\"inputUserNameGuest\"\n                            placeholder=\"User name\" required />\n                        <label for=\"inputUserName\" class=\"form-label\">User Name</label>\n                    </div>\n                    <div class=\"form-floating mb-3\">\n                        <input onChange={(event) => { setPassword(event.target.value) }} name=\"inputPassword\" type=\"password\" class=\"form-control\" id=\"inputPasswordGuest\"\n                            placeholder=\"Password\" required />\n                        <label for=\"inputPassword\" class=\"form-label\">Password</label>\n                    </div>\n                    <div class=\"position-relative\">\n                        <div class=\"position-absolute top-0 end-0\">\n                            <button onClick={guestLogin} id='guest-login-btn' class=\"btn btn-dark\" type=\"button\">Log In As Guest</button>\n                        </div>\n                    </div>\n                </form>\n            </div>\n\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}